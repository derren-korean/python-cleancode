# 8. 단위 테스트와 리펙토링

## 책의 내용

* 애자일 소프트웨어 개발 방법론에서 자동화된 테스트가 중요한 이유
* 단위 테스트가 코드 풀질에 대한 거울이 되는 이유
* 자동화된 테스트와 품질 게이트를 설정하기 위한 프레임워크와 도구
* 단위 테스트가 문서화와 도메인의 깊은 이해에 도움을 주는 이유
* TDD의 개념(테스트 주도 개발 방법론)

## 1. 디자인 원칙과 단위 테스트

단위 테스트   : 다른 코드의 일부분이 유효한지 검사하는 코드 
저자의 주장 : 단위 테스트는 소프트웨어의 핵심이 되는 필수적인 기능으로 일반 비즈니스로직과 동일한 수준으로 다루어야 한다.

##### 단위 테스트의 특징
* 격리
  * 외부 에이전트에 의존하지 않고 독립적으로 구동할 수 있어야 한다.
  * 로직의 검증에만 집중해야 한다.
  * 데이터베이스와 연결하지 않아야 한다.
  * HTTP 요청은 하지말아야 한다.
  * 단위 테스트가 임의의 순서로 일어나더라도 성공해야 한다.
* 성능
  * 신속하게 실행될 수 있어야 한다.(너무 오래 걸리면 안된다)
  * 반복적으로 여러번 수행될 수 있어야 한다.
* 자체 검증 
  * 단위 테스트의 실행만으로 결과를 결정할 수 있어야 한다.
  * 단위 테스트를 처리하기 위한 추가 단계가 없어야 한다.(?)

### 1.1 자동화된 테스트의 다른 형태


### 1.2 단위 테스트와 애자일 소프트웨어 개발


### 1.3 단위 테스트와 소프트웨어 설계


### 1.4 경계 테스트 




## 2. 프레임워크와 도구


### 2.1 프레임워크 or 라이브러리


#### unittest



```
예외가 발생하는지 뿐만 아니라 오류 메시지도 확인하자. 
발생한 예외가 정확히 우리가 원했던 예외인지 확인해야 한다.
우연히 예상했던 것과 다른 이유로 같은 오류가 발생할 수도 있다.
```

#### 테스트 파라미터화



#### pytest


### 2.2 코드 Coverage


### 2.3 Mock 객체

#### 패치와 모의에 대한 주의 사항

#### Mock 객체 사용하기

##### Mock 객체의 종류





## 3. 리팩토링

리펙토링을 하는 이유
* 코드의 구조 개선  -> 추가될 수 있는 요구사항에 유연하게 대응하기 위해
* 코드의 가독성 높이기 -> 유지보수성 비용 감소
  
수정 전과 후에도 동일하게 동작해야 하기 때문에 성공적인 리팩토링을 보장하기 위해 단위테스트가 반드시 필요함.

### 3.1 코드의 진화

### 3.2 상용 코드만 진화하는 것은 아니다?


## 4. 단위 테스트에 대한 추가 논의

### 4.1 속성 기반 테스트

### 4.2 변형 테스트


## 5. TDD